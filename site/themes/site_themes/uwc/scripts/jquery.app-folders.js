(function($){$.fn.appFolders=function(options){var settings=$.extend({opacity:.2,marginTopAdjust:false,marginTopBase:'0px',marginTopFirst:'0px',marginTopIncrement:'-100px',animationSpeed:200,URLrewrite:false,URLbase:"",internalLinkSelector:'.jaf-internal a',instaSwitch:false},options);return this.each(function(){var appFolders=$(".folderContent").hide();$(".folder").click(function(event){var openFolder=$(this).attr('id');var folderContent=$('.folderContent.'+openFolder);var folderContentShown=$(folderContent).css("display")!="none";var clickedFolder=$(this);if($(" .jaf-container .active-tool").length===0){var row=clickedFolder.parent(".jaf-row");$(row).after(folderContent);$(this).addClass('active-tool',settings.animationSpeed);$(folderContent).slideToggle(settings.animationSpeed);$(" .jaf-container").find(".folder").not(clickedFolder).each(function(){if(!folderContentShown){$(this).animate({opacity:settings.opacity},settings.animationSpeed);}
else{$(this).animate({opacity:1.00},settings.animationSpeed);}});if(settings.marginTopAdjust===false){return false;}else{var $i=$(this).parent().index('.jaf-row');var marTop=settings.marginTopBase-(settings.marginTopIncrement*($i))
$(this).parent().parent().animate({marginTop:marTop},settings.animationSpeed);}}
else{if(folderContentShown){$(this).toggleClass("active-tool");$(folderContent).slideToggle(settings.animationSpeed);$(" .jaf-container").find(".folder").not(clickedFolder).each(function(){if(!folderContentShown){$(this).animate({opacity:0.20},settings.animationSpeed);}
else{$(this).animate({opacity:1.00},settings.animationSpeed);}});document.location.hash='';$(this).parent().parent().animate({marginTop:settings.marginTopBase},settings.animationSpeed);}else{if(settings.instaSwitch!==false){var speed=settings.animationSpeed;if($(this).parent().find('.active-tool').length!==0){speed=0;}
$('.folderContent').slideUp(speed);$('.active-tool').removeClass('active-tool');$(' .jaf-container .folder').animate({opacity:1.00},speed);var row=clickedFolder.parent(".jaf-row");$(row).after(folderContent);$(this).addClass('active-tool',speed);$(folderContent).slideToggle(speed);$(" .jaf-container").find(".folder").not(clickedFolder).each(function(){if(!folderContentShown){$(this).animate({opacity:settings.opacity},speed);}
else{$(this).animate({opacity:1.00},speed);}});if(settings.marginTopAdjust===false){return false;}else{var $i=$(this).parent().index('.jaf-row');var marTop=settings.marginTopBase-(settings.marginTopIncrement*($i))
$(this).parent().parent().animate({marginTop:marTop},settings.animationSpeed);}}else{$('.folderContent').slideUp(settings.animationSpeed);$('.active-tool').removeClass('active-tool');$('.jaf-container .folder').animate({opacity:1.00},settings.animationSpeed);$(this).parent().parent().animate({marginTop:settings.marginTopBase},settings.animationSpeed);}}}
event.preventDefault();return false;});$('.jaf-close').click(function(){$(".folder").removeClass("active-tool");$(this).parent().slideToggle(settings.animationSpeed);$(this).parent().parent().animate({marginTop:settings.marginTopBase},settings.animationSpeed);});var clickedFolder=$(window.location.hash),openFolder=$(clickedFolder).attr('id'),folderContent=$('.'+openFolder),folderContentShown=$(folderContent).css("display")!="none",row=clickedFolder.parent(".jaf-row");$(row).after(folderContent);$('#'+openFolder).addClass('active-tool');$(folderContent).delay(200).slideDown();$(" .jaf-container").find(".folder").not(clickedFolder).each(function(){if(!folderContentShown){$(this).css('opacity',settings.opacity);}
else{$(this).css('opacity','1.00');}});var $i=$(row).index('.jaf-row');if($i!=-1){var marTop=settings.marginTopBase-(settings.marginTopIncrement*($i))
$(this).animate({marginTop:marTop},settings.animationSpeed);$('body').animate({scrollTop:0},200,'linear');}
$(settings.internalLinkSelector).click(function(event){var link=$(this).attr('href');window.location.href=link;window.location.reload();});});}})(jQuery);